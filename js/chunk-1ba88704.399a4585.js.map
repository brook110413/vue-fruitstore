{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.reduce.js","webpack:///./src/views/frontend/Cart.vue?a04f","webpack:///src/views/frontend/Cart.vue","webpack:///./src/views/frontend/Cart.vue?b128","webpack:///./src/views/frontend/Cart.vue","webpack:///./src/views/frontend/Cart.vue?7821","webpack:///./node_modules/core-js/internals/array-reduce.js"],"names":["$","$reduce","left","arrayMethodIsStrict","arrayMethodUsesToLength","STRICT_METHOD","USES_TO_LENGTH","1","target","proto","forced","reduce","callbackfn","this","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","isLoading","on","$event","cart","_m","_l","item","key","product","id","imageUrl","_v","_s","title","quantity","quantityUpdate","directives","name","rawName","value","expression","modifiers","domProps","composing","$set","_n","$forceUpdate","unit","_f","price","delOneCartItem","updateCartTotalPrice","coupon","Math","round","percent","_e","type","indexOf","_k","keyCode","addCoupon","couponCode","enabled","preventDefault","category","toProducts","staticRenderFns","staticStyle","data","created","getCart","$emit","methods","$http","get","api","then","delAllCartItem","delete","num","patch","$router","push","computed","component","aFunction","toObject","IndexedObject","toLength","createMethod","IS_RIGHT","that","argumentsLength","memo","O","self","index","i","TypeError","module","exports","right"],"mappings":"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","file":"js/chunk-1ba88704.399a4585.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar $reduce = require('../internals/array-reduce').left;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('reduce');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('reduce', { 1: 0 });\n\n// `Array.prototype.reduce` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.reduce\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || !USES_TO_LENGTH }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    return $reduce(this, callbackfn, arguments.length, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cart pt-4\"},[_c('loading',{attrs:{\"active\":_vm.isLoading},on:{\"update:active\":function($event){_vm.isLoading=$event}}}),_c('div',{staticClass:\"container h-100\"},[(!_vm.cart[0])?_c('div',{staticClass:\"d-flex justify-content-center\"},[_c('div',[_c('h2',{staticClass:\"cart__title mb-3 h5\"},[_vm._v(\"購物車內無商品，請返回商城選購\")]),_c('a',{staticClass:\"text-dark\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.category = '所有商品';\n            _vm.toProducts();}}},[_c('i',{staticClass:\"fas fa-angle-left mr-2\"}),_vm._v(\"回商城\")])])]):_c('div',[_vm._m(0),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-lg-8\"},[_c('table',{staticClass:\"table\"},[_vm._m(1),_c('tbody',_vm._l((_vm.cart),function(item){return _c('tr',{key:item.product.id},[_c('td',{staticClass:\"align-middle\",attrs:{\"scope\":\"row\"}},[_c('router-link',{attrs:{\"to\":(\"/product/\" + (item.product.id)),\"target\":\"_blank\"}},[_c('img',{staticClass:\"img-fluid mr-3 d-none d-md-inline-block\",attrs:{\"src\":item.product.imageUrl[0],\"width\":\"100px\"}})]),_vm._v(\" \"+_vm._s(item.product.title)+\" \")],1),_c('td',{staticClass:\"align-middle\"},[_c('div',{staticClass:\"input-group\"},[_c('div',{staticClass:\"input-group-prepend\"},[_c('button',{staticClass:\"btn btn-outline-primary\",attrs:{\"disabled\":item.quantity <= 1},on:{\"click\":function($event){item.quantity--;\n                          _vm.quantityUpdate(item.product.id, item.quantity);}}},[_vm._v(\" - \")])]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(item.quantity),expression:\"item.quantity\",modifiers:{\"number\":true}}],staticClass:\"form-control text-center\",attrs:{\"type\":\"number\",\"min\":\"1\",\"readonly\":\"\"},domProps:{\"value\":(item.quantity)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(item, \"quantity\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('div',{staticClass:\"input-group-append\"},[_c('button',{staticClass:\"btn btn-outline-primary\",on:{\"click\":function($event){item.quantity++;\n                          _vm.quantityUpdate(item.product.id, item.quantity);}}},[_vm._v(\" + \")])])])]),_c('td',{staticClass:\"align-middle text-center d-none d-sm-table-cell\"},[_vm._v(\" \"+_vm._s(item.product.unit)+\" \")]),_c('td',{staticClass:\"align-middle text-right\"},[_vm._v(\" \"+_vm._s(_vm._f(\"money\")((item.product.price * item.quantity)))+\" \")]),_c('td',{staticClass:\"align-middle text-center\"},[_c('button',{staticClass:\"btn btn-sm\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.delOneCartItem(item.product.id)}}},[_c('i',{staticClass:\"fas fa-times\"})])])])}),0)])]),_c('div',{staticClass:\"col-lg-4\"},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-body\"},[_c('h3',{staticClass:\"card-title\"},[_vm._v(\"訂單詳細\")]),_c('div',{staticClass:\"card-content mb-3\"},[_c('div',{staticClass:\"d-flex justify-content-between align-items-center mb-2\"},[_c('h5',{staticClass:\"mb-0\"},[_vm._v(\"小計\")]),_c('p',{staticClass:\"mb-0 h5\"},[_vm._v(_vm._s(_vm._f(\"money\")(_vm.updateCartTotalPrice)))])]),(_vm.coupon.enabled)?_c('div',{staticClass:\"d-flex\\n              justify-content-between align-items-center mb-2\"},[_c('h5',{staticClass:\"mb-0\"},[_vm._v(\"優惠碼\")]),_c('p',{staticClass:\"mb-0 h5\"},[_vm._v(\" - \"+_vm._s(_vm._f(\"money\")(Math.round(_vm.updateCartTotalPrice * ((100 - _vm.coupon.percent) / 100))))+\" \")])]):_vm._e(),_c('div',{staticClass:\"form-group d-flex\"},[_c('label',{staticClass:\"sr-only\",attrs:{\"for\":\"couponCode\"}},[_vm._v(\"couponCode\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.couponCode),expression:\"couponCode\"}],staticClass:\"form-control w-50 mr-2\",attrs:{\"type\":\"text\",\"id\":\"couponCode\",\"placeholder\":\"請輸入優惠碼\"},domProps:{\"value\":(_vm.couponCode)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.addCoupon()},\"input\":function($event){if($event.target.composing){ return; }_vm.couponCode=$event.target.value}}}),_c('button',{staticClass:\"btn btn-outline-primary w-50\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.addCoupon()}}},[_vm._v(\" 套用優惠碼 \")])]),(!_vm.coupon.enabled)?_c('p',{staticClass:\"mb-2 font-italic\"},[_vm._v(\"優惠碼輸入 coupon 即享 9 折優惠\")]):_vm._e()]),_c('div',{staticClass:\"d-flex justify-content-between align-items-center mb-3\"},[_c('h4',{staticClass:\"mb-0 font-weight-bold\"},[_vm._v(\"總計\")]),(_vm.coupon.enabled)?_c('p',{staticClass:\"mb-0 h4\"},[_vm._v(\" \"+_vm._s(_vm._f(\"money\")(Math.round(_vm.updateCartTotalPrice * (_vm.coupon.percent / 100))))+\" \")]):_c('p',{staticClass:\"mb-0 h4\"},[_vm._v(\" \"+_vm._s(_vm._f(\"money\")(_vm.updateCartTotalPrice))+\" \")])]),_c('div',{staticClass:\"d-flex justify-content-between align-items-center\"},[_c('router-link',{staticClass:\"text-dark\",attrs:{\"to\":\"/products\"}},[_c('i',{staticClass:\"fas fa-angle-left mr-2\"}),_vm._v(\"繼續選購\")]),_c('router-link',{staticClass:\"btn btn-primary\",attrs:{\"to\":\"/order\"}},[_vm._v(\"前往結帳\")])],1)])])])])])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row justify-content-center\"},[_c('div',{staticClass:\"col-lg-8 mb-5\"},[_c('ul',{staticClass:\"list-unstyled d-flex justify-content-around mb-1\"},[_c('li',{staticClass:\"d-flex flex-column align-items-center\"},[_c('span',{staticClass:\"rounded-circle bg-primary\\n              d-flex justify-content-center\\n              align-items-center text-white\",staticStyle:{\"width\":\"20px\",\"height\":\"20px\"}},[_vm._v(\"1\")]),_vm._v(\"購物車 \")]),_c('li',{staticClass:\"d-flex flex-column align-items-center\"},[_c('span',{staticClass:\"rounded-circle bg-primary\\n              d-flex justify-content-center\\n              align-items-center text-white\",staticStyle:{\"width\":\"20px\",\"height\":\"20px\"}},[_vm._v(\"2\")]),_vm._v(\"填寫資料 \")]),_c('li',{staticClass:\"d-flex flex-column align-items-center\"},[_c('span',{staticClass:\"rounded-circle bg-primary\\n              d-flex justify-content-center\\n              align-items-center text-white\",staticStyle:{\"width\":\"20px\",\"height\":\"20px\"}},[_vm._v(\"3\")]),_vm._v(\"訂單確認 \")])]),_c('div',{staticClass:\"progress\"},[_c('div',{staticClass:\"progress-bar progress-bar-striped progress-bar-animated\",staticStyle:{\"width\":\"33%\"},attrs:{\"role\":\"progressbar\",\"aria-valuenow\":\"33\",\"aria-valuemin\":\"0\",\"aria-valuemax\":\"100\"}})])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"品名\")]),_c('th',{staticClass:\"text-center\",attrs:{\"scope\":\"col\",\"width\":\"150\"}},[_vm._v(\"數量\")]),_c('th',{staticClass:\"text-center d-none d-sm-table-cell\",attrs:{\"scope\":\"col\"}},[_vm._v(\"單位\")]),_c('th',{staticClass:\"text-right\",attrs:{\"scope\":\"col\",\"width\":\"120\"}},[_vm._v(\"小計\")]),_c('th',{staticClass:\"text-center\",attrs:{\"scope\":\"col\"}},[_vm._v(\"移除\")])])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"cart pt-4\">\n    <loading :active.sync=\"isLoading\"></loading>\n    <div class=\"container h-100\">\n      <div class=\"d-flex justify-content-center\" v-if=\"!cart[0]\">\n        <div>\n          <h2 class=\"cart__title mb-3 h5\">購物車內無商品，請返回商城選購</h2>\n          <a\n            href=\"#\"\n            @click.prevent=\"\n              category = '所有商品';\n              toProducts();\n            \"\n            class=\"text-dark\"\n          >\n            <i class=\"fas fa-angle-left mr-2\"></i>回商城</a\n          >\n        </div>\n      </div>\n      <div v-else>\n        <div class=\"row justify-content-center\">\n          <div class=\"col-lg-8 mb-5\">\n            <ul class=\"list-unstyled d-flex justify-content-around mb-1\">\n              <li class=\"d-flex flex-column align-items-center\">\n                <span\n                  class=\"rounded-circle bg-primary\n                d-flex justify-content-center\n                align-items-center text-white\"\n                  style=\"width:20px; height:20px\"\n                  >1</span\n                >購物車\n              </li>\n              <li class=\"d-flex flex-column align-items-center\">\n                <span\n                  class=\"rounded-circle bg-primary\n                d-flex justify-content-center\n                align-items-center text-white\"\n                  style=\"width:20px; height:20px\"\n                  >2</span\n                >填寫資料\n              </li>\n              <li class=\"d-flex flex-column align-items-center\">\n                <span\n                  class=\"rounded-circle bg-primary\n                d-flex justify-content-center\n                align-items-center text-white\"\n                  style=\"width:20px; height:20px\"\n                  >3</span\n                >訂單確認\n              </li>\n            </ul>\n            <div class=\"progress\">\n              <div\n                class=\"progress-bar progress-bar-striped progress-bar-animated\"\n                role=\"progressbar\"\n                aria-valuenow=\"33\"\n                aria-valuemin=\"0\"\n                aria-valuemax=\"100\"\n                style=\"width: 33%\"\n              ></div>\n            </div>\n          </div>\n        </div>\n        <div class=\"row\">\n          <div class=\"col-lg-8\">\n            <table class=\"table\">\n              <thead>\n                <tr>\n                  <th scope=\"col\">品名</th>\n                  <th scope=\"col\" width=\"150\" class=\"text-center\">數量</th>\n                  <th scope=\"col\" class=\"text-center d-none d-sm-table-cell\">單位</th>\n                  <th scope=\"col\" width=\"120\" class=\"text-right\">小計</th>\n                  <th scope=\"col\" class=\"text-center\">移除</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-for=\"item in cart\" :key=\"item.product.id\">\n                  <td class=\"align-middle\" scope=\"row\">\n                    <router-link :to=\"`/product/${item.product.id}`\" target=\"_blank\">\n                      <img\n                        :src=\"item.product.imageUrl[0]\"\n                        class=\"img-fluid mr-3 d-none d-md-inline-block\"\n                        width=\"100px\"\n                      />\n                    </router-link>\n                    {{ item.product.title }}\n                  </td>\n                  <td class=\"align-middle\">\n                    <div class=\"input-group\">\n                      <div class=\"input-group-prepend\">\n                        <button\n                          class=\"btn btn-outline-primary\"\n                          @click=\"\n                            item.quantity--;\n                            quantityUpdate(item.product.id, item.quantity);\n                          \"\n                          :disabled=\"item.quantity <= 1\"\n                        >\n                          -\n                        </button>\n                      </div>\n                      <input\n                        type=\"number\"\n                        min=\"1\"\n                        class=\"form-control text-center\"\n                        readonly\n                        v-model.number=\"item.quantity\"\n                      />\n                      <div class=\"input-group-append\">\n                        <button\n                          class=\"btn btn-outline-primary\"\n                          @click=\"\n                            item.quantity++;\n                            quantityUpdate(item.product.id, item.quantity);\n                          \"\n                        >\n                          +\n                        </button>\n                      </div>\n                    </div>\n                  </td>\n                  <td class=\"align-middle text-center d-none d-sm-table-cell\">\n                    {{ item.product.unit }}\n                  </td>\n                  <td class=\"align-middle text-right\">\n                    {{ (item.product.price * item.quantity) | money }}\n                  </td>\n                  <td class=\"align-middle text-center\">\n                    <button\n                      type=\"button\"\n                      class=\"btn btn-sm\"\n                      @click=\"delOneCartItem(item.product.id)\"\n                    >\n                      <i class=\"fas fa-times\"></i>\n                    </button>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n          <div class=\"col-lg-4\">\n            <div class=\"card\">\n              <div class=\"card-body\">\n                <h3 class=\"card-title\">訂單詳細</h3>\n                <div class=\"card-content mb-3\">\n                  <div class=\"d-flex justify-content-between align-items-center mb-2\">\n                    <h5 class=\"mb-0\">小計</h5>\n                    <p class=\"mb-0 h5\">{{ updateCartTotalPrice | money }}</p>\n                  </div>\n                  <div\n                    class=\"d-flex\n                justify-content-between align-items-center mb-2\"\n                    v-if=\"coupon.enabled\"\n                  >\n                    <h5 class=\"mb-0\">優惠碼</h5>\n                    <p class=\"mb-0 h5\">\n                      -\n                      {{\n                        Math.round(updateCartTotalPrice * ((100 - coupon.percent) / 100)) | money\n                      }}\n                    </p>\n                  </div>\n                  <div class=\"form-group d-flex\">\n                    <label for=\"couponCode\" class=\"sr-only\">couponCode</label>\n                    <input\n                      type=\"text\"\n                      class=\"form-control w-50 mr-2\"\n                      id=\"couponCode\"\n                      placeholder=\"請輸入優惠碼\"\n                      v-model=\"couponCode\"\n                      @keyup.enter=\"addCoupon()\"\n                    />\n                    <button type=\"button\" class=\"btn btn-outline-primary w-50\" @click=\"addCoupon()\">\n                      套用優惠碼\n                    </button>\n                  </div>\n                  <p class=\"mb-2 font-italic\" v-if=\"!coupon.enabled\">優惠碼輸入 coupon 即享 9 折優惠</p>\n                </div>\n                <div class=\"d-flex justify-content-between align-items-center mb-3\">\n                  <h4 class=\"mb-0 font-weight-bold\">總計</h4>\n                  <p class=\"mb-0 h4\" v-if=\"coupon.enabled\">\n                    {{ Math.round(updateCartTotalPrice * (coupon.percent / 100)) | money }}\n                  </p>\n                  <p class=\"mb-0 h4\" v-else>\n                    {{ updateCartTotalPrice | money }}\n                  </p>\n                </div>\n                <div class=\"d-flex justify-content-between align-items-center\">\n                  <router-link to=\"/products\" class=\"text-dark\">\n                    <i class=\"fas fa-angle-left mr-2\"></i>繼續選購</router-link\n                  >\n                  <router-link to=\"/order\" class=\"btn btn-primary\">前往結帳</router-link>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport swal from 'sweetalert';\n\nexport default {\n  name: 'Cart',\n  data() {\n    return {\n      cart: [],\n      isLoading: false,\n      coupon: {},\n      couponCode: '',\n      category: '',\n    };\n  },\n  created() {\n    this.getCart();\n    this.$emit('addCoupon', this.coupon);\n  },\n  methods: {\n    getCart() {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_UUID}/ec/shopping`;\n      this.$http.get(api).then((res) => {\n        this.cart = res.data.data;\n        this.isLoading = false;\n      });\n    },\n    delAllCartItem() {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_UUID}/ec/shopping/all/product`;\n      this.$http.delete(api).then(() => {\n        this.getCart();\n        this.$bus.$emit('updateCart');\n      });\n    },\n    quantityUpdate(id, num) {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_UUID}/ec/shopping`;\n      const data = {\n        product: id,\n        quantity: num,\n      };\n      this.$http.patch(api, data).then(() => {\n        this.getCart();\n      });\n    },\n    delOneCartItem(id) {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_UUID}/ec/shopping/${id}`;\n      this.$http.delete(api).then(() => {\n        this.getCart();\n        this.$bus.$emit('updateCart');\n      });\n    },\n    addCoupon() {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_UUID}/ec/coupon/search`;\n      this.$http\n        .post(api, {\n          code: this.couponCode,\n        })\n        .then((res) => {\n          this.coupon = res.data.data;\n          this.$emit('addCoupon', this.coupon);\n          this.isLoading = false;\n        })\n        .catch(() => {\n          swal({\n            title: '優惠碼失敗',\n            text: '優惠碼失敗，請再重新嘗試',\n            icon: 'error',\n            buttons: false,\n            timer: 1000,\n          });\n          this.isLoading = false;\n        });\n    },\n    toProducts() {\n      this.$emit('fliterProduct', this.category);\n      this.$router.push(`/products/${this.category}`);\n    },\n  },\n  computed: {\n    updateCartTotalPrice() {\n      return this.cart.reduce((prev, i) => prev + i.product.price * i.quantity, 0);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.cart__title {\n  @media (min-width: 768px) {\n    font-size: 32px;\n  }\n}\n\n.card {\n  border: 1px solid #dee2e6;\n  &-content {\n    border-bottom: 1px solid #dee2e6;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cart.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Cart.vue?vue&type=template&id=75a2a126&scoped=true&\"\nimport script from \"./Cart.vue?vue&type=script&lang=js&\"\nexport * from \"./Cart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Cart.vue?vue&type=style&index=0&id=75a2a126&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"75a2a126\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cart.vue?vue&type=style&index=0&id=75a2a126&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cart.vue?vue&type=style&index=0&id=75a2a126&lang=scss&scoped=true&\"","var aFunction = require('../internals/a-function');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\nvar toLength = require('../internals/to-length');\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    aFunction(callbackfn);\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = toLength(O.length);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw TypeError('Reduce of empty array with no initial value');\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.reduce` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n"],"sourceRoot":""}