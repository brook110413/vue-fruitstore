(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47d3b868"],{"13d5":function(t,e,r){"use strict";var i=r("23e7"),a=r("d58f").left,s=r("a640"),n=r("ae40"),o=s("reduce"),c=n("reduce",{1:0});i({target:"Array",proto:!0,forced:!o||!c},{reduce:function(t){return a(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"99af":function(t,e,r){"use strict";var i=r("23e7"),a=r("d039"),s=r("e8b5"),n=r("861d"),o=r("7b0b"),c=r("50c4"),d=r("8418"),l=r("65f0"),u=r("1dde"),h=r("b622"),p=r("2d00"),f=h("isConcatSpreadable"),v=9007199254740991,g="Maximum allowed index exceeded",_=p>=51||!a((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),m=u("concat"),b=function(t){if(!n(t))return!1;var e=t[f];return void 0!==e?!!e:s(t)},y=!_||!m;i({target:"Array",proto:!0,forced:y},{concat:function(t){var e,r,i,a,s,n=o(this),u=l(n,0),h=0;for(e=-1,i=arguments.length;e<i;e++)if(s=-1===e?n:arguments[e],b(s)){if(a=c(s.length),h+a>v)throw TypeError(g);for(r=0;r<a;r++,h++)r in s&&d(u,h,s[r])}else{if(h>=v)throw TypeError(g);d(u,h++,s)}return u.length=h,u}})},b7c8:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"checkout pt-4"},[r("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),r("div",{staticClass:"container"},[t._m(0),t.order.products?r("div",{staticClass:"row justify-content-center"},[r("div",{staticClass:"col-lg-6"},[r("table",{staticClass:"table mb-5"},[t._m(1),r("tbody",[t._l(t.order.products,(function(e,i){return r("tr",{key:i},[r("td",{staticClass:"align-middle",attrs:{scope:"row"}},[r("img",{staticClass:"img-fluid mr-3 d-none d-md-inline-block",attrs:{src:e.product.imageUrl[0],width:"100px"}}),t._v(" "+t._s(e.product.title)+" ")]),r("td",{staticClass:"align-middle"},[t._v(t._s(e.quantity)+" "+t._s(e.product.unit))]),r("td",{staticClass:"align-middle text-right"},[t._v(" "+t._s(t._f("money")(e.product.price*e.quantity))+" ")])])})),t.order.coupon?r("tr",[r("td"),r("td",[t._v("優惠碼")]),r("td",{staticClass:"text-right"},[t._v(" - "+t._s(t._f("money")(Math.round(t.orderTotalPrice*((100-t.order.coupon.percent)/100))))+" ")])]):t._e(),r("tr",[r("td"),r("td",{staticClass:"h4 font-weight-bold"},[t._v("總計")]),r("td",{staticClass:"text-right h4 font-weight-bold"},[t._v(" "+t._s(t._f("money")(Math.round(t.order.amount)))+" ")])])],2)]),r("table",{staticClass:"table table-striped"},[r("tbody",[r("tr",[r("th",{attrs:{scope:"row",width:"120"}},[t._v("收件人姓名")]),r("td",[t._v(t._s(t.order.user.name))])]),r("tr",[r("th",{attrs:{scope:"row",width:"120"}},[t._v("電子信箱")]),r("td",[t._v(t._s(t.order.user.email))])]),r("tr",[r("th",{attrs:{scope:"row",width:"120"}},[t._v("收件人電話")]),r("td",[t._v(t._s(t.order.user.tel))])]),r("tr",[r("th",{attrs:{scope:"row",width:"120"}},[t._v("收件人地址")]),r("td",[t._v(t._s(t.order.user.address))])])])]),r("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"button"},on:{click:function(e){return t.payOrder()}}},[t._v(" 確認付款 ")])])]):t._e()])],1)},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row justify-content-center"},[r("div",{staticClass:"col-lg-8 mb-4"},[r("ul",{staticClass:"list-unstyled d-flex justify-content-around mb-1"},[r("li",{staticClass:"d-flex flex-column align-items-center"},[r("span",{staticClass:"rounded-circle bg-primary\n              d-flex justify-content-center\n              align-items-center text-white",staticStyle:{width:"20px",height:"20px"}},[t._v("1")]),t._v("購物車 ")]),r("li",{staticClass:"d-flex flex-column align-items-center"},[r("span",{staticClass:"rounded-circle bg-primary\n              d-flex justify-content-center\n              align-items-center text-white",staticStyle:{width:"20px",height:"20px"}},[t._v("2")]),t._v("填寫資料 ")]),r("li",{staticClass:"d-flex flex-column align-items-center"},[r("span",{staticClass:"rounded-circle bg-primary\n              d-flex justify-content-center\n              align-items-center text-white",staticStyle:{width:"20px",height:"20px"}},[t._v("3")]),t._v("訂單確認 ")])]),r("div",{staticClass:"progress"},[r("div",{staticClass:"progress-bar progress-bar-striped progress-bar-animated",staticStyle:{width:"100%"},attrs:{role:"progressbar","aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100"}})])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",{attrs:{scope:"col"}},[t._v("品名")]),r("th",{attrs:{scope:"col"}},[t._v("數量")]),r("th",{staticClass:"text-right",attrs:{scope:"col"}},[t._v("小計")])])])}],s=(r("99af"),r("13d5"),{name:"Checkout",data:function(){return{orders:[],order:{},isLoading:!1}},created:function(){this.getOrders()},methods:{getOrders:function(){var t=this;this.isLoading=!0;var e="".concat("https://course-ec-api.hexschool.io","/api/").concat("069602ae-7e90-4b68-ab74-eede1d9ee78e","/ec/orders");this.$http.get(e).then((function(e){t.orders=e.data.data,t.getOrder()}))},getOrder:function(){var t=this;this.isLoading=!0;var e="".concat("https://course-ec-api.hexschool.io","/api/").concat("069602ae-7e90-4b68-ab74-eede1d9ee78e","/ec/orders/").concat(this.orders[0].id);this.$http.get(e).then((function(e){t.order=e.data.data,t.isLoading=!1}))},payOrder:function(){var t=this;this.isLoading=!0;var e="".concat("https://course-ec-api.hexschool.io","/api/").concat("069602ae-7e90-4b68-ab74-eede1d9ee78e","/ec/orders/").concat(this.order.id,"/paying");this.$http.post(e).then((function(){t.$router.push("/complete"),t.$emit("removeCoupon"),t.isLoading=!1}))}},computed:{orderTotalPrice:function(){return this.order.products.reduce((function(t,e){return t+e.product.price*e.quantity}),0)}}}),n=s,o=r("2877"),c=Object(o["a"])(n,i,a,!1,null,null,null);e["default"]=c.exports},d58f:function(t,e,r){var i=r("1c0b"),a=r("7b0b"),s=r("44ad"),n=r("50c4"),o=function(t){return function(e,r,o,c){i(r);var d=a(e),l=s(d),u=n(d.length),h=t?u-1:0,p=t?-1:1;if(o<2)while(1){if(h in l){c=l[h],h+=p;break}if(h+=p,t?h<0:u<=h)throw TypeError("Reduce of empty array with no initial value")}for(;t?h>=0:u>h;h+=p)h in l&&(c=r(c,l[h],h,d));return c}};t.exports={left:o(!1),right:o(!0)}}}]);
//# sourceMappingURL=chunk-47d3b868.9df9482e.js.map