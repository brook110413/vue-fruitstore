(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ba88704"],{"13d5":function(t,e,a){"use strict";var i=a("23e7"),s=a("d58f").left,n=a("a640"),c=a("ae40"),o=n("reduce"),r=c("reduce",{1:0});i({target:"Array",proto:!0,forced:!o||!r},{reduce:function(t){return s(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},2355:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cart pt-4"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"container h-100"},[t.cart[0]?a("div",[t._m(0),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-8"},[a("table",{staticClass:"table"},[t._m(1),a("tbody",t._l(t.cart,(function(e){return a("tr",{key:e.product.id},[a("td",{staticClass:"align-middle",attrs:{scope:"row"}},[a("router-link",{attrs:{to:"/product/"+e.product.id,target:"_blank"}},[a("img",{staticClass:"img-fluid mr-3 d-none d-md-inline-block",attrs:{src:e.product.imageUrl[0],width:"100px"}})]),t._v(" "+t._s(e.product.title)+" ")],1),a("td",{staticClass:"align-middle"},[a("div",{staticClass:"input-group"},[a("div",{staticClass:"input-group-prepend"},[a("button",{staticClass:"btn btn-outline-primary",attrs:{disabled:e.quantity<=1},on:{click:function(a){e.quantity--,t.quantityUpdate(e.product.id,e.quantity)}}},[t._v(" - ")])]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.quantity,expression:"item.quantity",modifiers:{number:!0}}],staticClass:"form-control text-center",attrs:{type:"number",min:"1",readonly:""},domProps:{value:e.quantity},on:{input:function(a){a.target.composing||t.$set(e,"quantity",t._n(a.target.value))},blur:function(e){return t.$forceUpdate()}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-primary",on:{click:function(a){e.quantity++,t.quantityUpdate(e.product.id,e.quantity)}}},[t._v(" + ")])])])]),a("td",{staticClass:"align-middle text-center d-none d-sm-table-cell"},[t._v(" "+t._s(e.product.unit)+" ")]),a("td",{staticClass:"align-middle text-right"},[t._v(" "+t._s(t._f("money")(e.product.price*e.quantity))+" ")]),a("td",{staticClass:"align-middle text-center"},[a("button",{staticClass:"btn btn-sm",attrs:{type:"button"},on:{click:function(a){return t.delOneCartItem(e.product.id)}}},[a("i",{staticClass:"fas fa-times"})])])])})),0)])]),a("div",{staticClass:"col-lg-4"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("h3",{staticClass:"card-title"},[t._v("訂單詳細")]),a("div",{staticClass:"card-content mb-3"},[a("div",{staticClass:"d-flex justify-content-between align-items-center mb-2"},[a("h5",{staticClass:"mb-0"},[t._v("小計")]),a("p",{staticClass:"mb-0 h5"},[t._v(t._s(t._f("money")(t.updateCartTotalPrice)))])]),t.coupon.enabled?a("div",{staticClass:"d-flex\n              justify-content-between align-items-center mb-2"},[a("h5",{staticClass:"mb-0"},[t._v("優惠碼")]),a("p",{staticClass:"mb-0 h5"},[t._v(" - "+t._s(t._f("money")(Math.round(t.updateCartTotalPrice*((100-t.coupon.percent)/100))))+" ")])]):t._e(),a("div",{staticClass:"form-group d-flex"},[a("label",{staticClass:"sr-only",attrs:{for:"couponCode"}},[t._v("couponCode")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.couponCode,expression:"couponCode"}],staticClass:"form-control w-50 mr-2",attrs:{type:"text",id:"couponCode",placeholder:"請輸入優惠碼"},domProps:{value:t.couponCode},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addCoupon()},input:function(e){e.target.composing||(t.couponCode=e.target.value)}}}),a("button",{staticClass:"btn btn-outline-primary w-50",attrs:{type:"button"},on:{click:function(e){return t.addCoupon()}}},[t._v(" 套用優惠碼 ")])]),t.coupon.enabled?t._e():a("p",{staticClass:"mb-2 font-italic"},[t._v("優惠碼輸入 coupon 即享 9 折優惠")])]),a("div",{staticClass:"d-flex justify-content-between align-items-center mb-3"},[a("h4",{staticClass:"mb-0 font-weight-bold"},[t._v("總計")]),t.coupon.enabled?a("p",{staticClass:"mb-0 h4"},[t._v(" "+t._s(t._f("money")(Math.round(t.updateCartTotalPrice*(t.coupon.percent/100))))+" ")]):a("p",{staticClass:"mb-0 h4"},[t._v(" "+t._s(t._f("money")(t.updateCartTotalPrice))+" ")])]),a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("router-link",{staticClass:"text-dark",attrs:{to:"/products"}},[a("i",{staticClass:"fas fa-angle-left mr-2"}),t._v("繼續選購")]),a("router-link",{staticClass:"btn btn-primary",attrs:{to:"/order"}},[t._v("前往結帳")])],1)])])])])]):a("div",{staticClass:"d-flex justify-content-center"},[a("div",[a("h2",{staticClass:"cart__title mb-3 h5"},[t._v("購物車內無商品，請返回商城選購")]),a("a",{staticClass:"text-dark",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.category="所有商品",t.toProducts()}}},[a("i",{staticClass:"fas fa-angle-left mr-2"}),t._v("回商城")])])])])],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-lg-8 mb-5"},[a("ul",{staticClass:"list-unstyled d-flex justify-content-around mb-1"},[a("li",{staticClass:"d-flex flex-column align-items-center"},[a("span",{staticClass:"rounded-circle bg-primary\n              d-flex justify-content-center\n              align-items-center text-white",staticStyle:{width:"20px",height:"20px"}},[t._v("1")]),t._v("購物車 ")]),a("li",{staticClass:"d-flex flex-column align-items-center"},[a("span",{staticClass:"rounded-circle bg-primary\n              d-flex justify-content-center\n              align-items-center text-white",staticStyle:{width:"20px",height:"20px"}},[t._v("2")]),t._v("填寫資料 ")]),a("li",{staticClass:"d-flex flex-column align-items-center"},[a("span",{staticClass:"rounded-circle bg-primary\n              d-flex justify-content-center\n              align-items-center text-white",staticStyle:{width:"20px",height:"20px"}},[t._v("3")]),t._v("訂單確認 ")])]),a("div",{staticClass:"progress"},[a("div",{staticClass:"progress-bar progress-bar-striped progress-bar-animated",staticStyle:{width:"33%"},attrs:{role:"progressbar","aria-valuenow":"33","aria-valuemin":"0","aria-valuemax":"100"}})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("品名")]),a("th",{staticClass:"text-center",attrs:{scope:"col",width:"150"}},[t._v("數量")]),a("th",{staticClass:"text-center d-none d-sm-table-cell",attrs:{scope:"col"}},[t._v("單位")]),a("th",{staticClass:"text-right",attrs:{scope:"col",width:"120"}},[t._v("小計")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("移除")])])])}],n=(a("99af"),a("13d5"),a("1940")),c=a.n(n),o={name:"Cart",data:function(){return{cart:[],isLoading:!1,coupon:{},couponCode:"",category:""}},created:function(){this.getCart(),this.$emit("addCoupon",this.coupon)},methods:{getCart:function(){var t=this;this.isLoading=!0;var e="".concat("https://course-ec-api.hexschool.io","/api/").concat("069602ae-7e90-4b68-ab74-eede1d9ee78e","/ec/shopping");this.$http.get(e).then((function(e){t.cart=e.data.data,t.isLoading=!1}))},delAllCartItem:function(){var t=this;this.isLoading=!0;var e="".concat("https://course-ec-api.hexschool.io","/api/").concat("069602ae-7e90-4b68-ab74-eede1d9ee78e","/ec/shopping/all/product");this.$http.delete(e).then((function(){t.getCart(),t.$bus.$emit("updateCart")}))},quantityUpdate:function(t,e){var a=this;this.isLoading=!0;var i="".concat("https://course-ec-api.hexschool.io","/api/").concat("069602ae-7e90-4b68-ab74-eede1d9ee78e","/ec/shopping"),s={product:t,quantity:e};this.$http.patch(i,s).then((function(){a.getCart()}))},delOneCartItem:function(t){var e=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io","/api/").concat("069602ae-7e90-4b68-ab74-eede1d9ee78e","/ec/shopping/").concat(t);this.$http.delete(a).then((function(){e.getCart(),e.$bus.$emit("updateCart")}))},addCoupon:function(){var t=this;this.isLoading=!0;var e="".concat("https://course-ec-api.hexschool.io","/api/").concat("069602ae-7e90-4b68-ab74-eede1d9ee78e","/ec/coupon/search");this.$http.post(e,{code:this.couponCode}).then((function(e){t.coupon=e.data.data,t.$emit("addCoupon",t.coupon),t.isLoading=!1})).catch((function(){c()({title:"優惠碼失敗",text:"優惠碼失敗，請再重新嘗試",icon:"error",buttons:!1,timer:1e3}),t.isLoading=!1}))},toProducts:function(){this.$emit("fliterProduct",this.category),this.$router.push("/products/".concat(this.category))}},computed:{updateCartTotalPrice:function(){return this.cart.reduce((function(t,e){return t+e.product.price*e.quantity}),0)}}},r=o,l=(a("8353"),a("2877")),d=Object(l["a"])(r,i,s,!1,null,"75a2a126",null);e["default"]=d.exports},8353:function(t,e,a){"use strict";var i=a("e6db"),s=a.n(i);s.a},d58f:function(t,e,a){var i=a("1c0b"),s=a("7b0b"),n=a("44ad"),c=a("50c4"),o=function(t){return function(e,a,o,r){i(a);var l=s(e),d=n(l),u=c(l.length),p=t?u-1:0,h=t?-1:1;if(o<2)while(1){if(p in d){r=d[p],p+=h;break}if(p+=h,t?p<0:u<=p)throw TypeError("Reduce of empty array with no initial value")}for(;t?p>=0:u>p;p+=h)p in d&&(r=a(r,d[p],p,l));return r}};t.exports={left:o(!1),right:o(!0)}},e6db:function(t,e,a){}}]);
//# sourceMappingURL=chunk-1ba88704.399a4585.js.map