(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e6e9b1a"],{1799:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination justify-content-center"},[a("li",{staticClass:"page-item",class:{disabled:1===t.pages.current_page}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return e.preventDefault(),t.changePage(t.pages.current_page-1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pages.total_pages,(function(e,o){return a("li",{key:o,staticClass:"page-item",class:{active:t.pages.current_page===e}},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.changePage(e)}}},[t._v(" "+t._s(e)+" ")])])})),a("li",{staticClass:"page-item",class:{disabled:t.pages.current_page===t.pages.total_pages}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return e.preventDefault(),t.changePage(t.pages.current_page+1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])},s=[],i={props:{pages:{type:Object}},methods:{changePage:function(t){this.$emit("update",t)}}},r=i,c=a("2877"),n=Object(c["a"])(r,o,s,!1,null,null,null);e["a"]=n.exports},"6d09":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"products"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"mt-3 text-right"},[a("button",{staticClass:"btn btn-primary font-weight-bold",attrs:{type:"button","data-toggle":"modal","data-target":"#productModal"},on:{click:function(e){t.submit="add",t.productTemp={}}}},[t._v(" 建立新的商品 ")])]),a("table",{staticClass:"table table-striped mt-3"},[t._m(0),a("tbody",t._l(t.products,(function(e){return a("tr",{key:e.id},[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.category))]),a("td",[t._v(t._s(e.title))]),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("money")(e.origin_price)))]),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("money")(e.price)))]),e.enabled?a("td",{staticClass:"text-success text-center font-weight-bold"},[t._v("啟用")]):a("td",{staticClass:"text-secondary text-center"},[t._v("不啟用")]),a("td",[a("button",{staticClass:"btn btn-outline-primary btn-sm mr-2",attrs:{type:"button"},on:{click:function(a){t.getProductTemp(e),t.openEditModal()}}},[a("i",{staticClass:"fas fa-edit"})]),a("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button","data-toggle":"modal","data-target":"#delProductModal"},on:{click:function(a){return t.getProductTemp(e)}}},[a("i",{staticClass:"fas fa-trash-alt"})])])])})),0)]),a("product-modal",{ref:"productModal",attrs:{submit:t.submit},on:{update:t.getProducts}}),a("del-product-modal",{attrs:{"product-temp":t.productTemp},on:{update:t.getProducts}}),t.products[0]?a("pagination",{attrs:{pages:t.pagination},on:{update:function(e){return t.getProducts()}}}):t._e()],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",{staticClass:"thead-dark"},[a("th",{attrs:{scope:"col",width:"15%"}},[t._v("分類")]),a("th",{attrs:{scope:"col",width:"40%"}},[t._v("產品名稱")]),a("th",{staticClass:"sort text-right",attrs:{scope:"col",width:"10%"}},[t._v(" 原價 ")]),a("th",{staticClass:"sort text-right",attrs:{scope:"col",width:"10%"}},[t._v(" 售價 ")]),a("th",{staticClass:"text-center",attrs:{scope:"col",width:"15%"}},[t._v("是否啟用")]),a("th",{staticClass:"text-center",attrs:{scope:"col",width:"10%"}},[t._v("編輯")])])])}],i=(a("99af"),a("5530")),r=a("1799"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-xl",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header bg-primary"},[a("h5",{staticClass:"modal-title text-white",attrs:{id:"exampleModalLabel"}},[t._v("商品內容")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:function(e){return t.cancel()}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4"},[t._l(5,(function(e){return a("div",{key:e+"img",staticClass:"form-group"},[a("label",{attrs:{for:"img"+e}},[t._v("輸入圖片網址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.productTemp.imageUrl[e-1],expression:"productTemp.imageUrl[i - 1]"}],staticClass:"form-control",attrs:{type:"text",id:"img"+e,placeholder:"請輸入圖片連結"},domProps:{value:t.productTemp.imageUrl[e-1]},on:{input:function(a){a.target.composing||t.$set(t.productTemp.imageUrl,e-1,a.target.value)}}})])})),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"imgFile"}},[t._v("或 上傳圖片")]),a("input",{staticClass:"form-control",attrs:{type:"file",id:"imgFile"},on:{change:t.uploadFile}})]),a("img",{staticClass:"img-fluid",attrs:{src:t.productTemp.imageUrl[0],alt:""}})],2),a("div",{staticClass:"col-8"},[a("div",{staticClass:"form-group"},[a("Validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors,s=e.classes;return[a("label",{attrs:{for:"title"}},[t._v("商品名稱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.productTemp.title,expression:"productTemp.title"}],staticClass:"form-control",class:s,attrs:{type:"text",name:"產品名稱",id:"title",placeholder:"請輸入商品名稱"},domProps:{value:t.productTemp.title},on:{input:function(e){e.target.composing||t.$set(t.productTemp,"title",e.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(" "+t._s(o[0])+" ")])]}}])})],1),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col"},[a("Validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors,s=e.classes;return[a("label",{attrs:{for:"category"}},[t._v("分類")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.productTemp.category,expression:"productTemp.category"}],staticClass:"form-control",class:s,attrs:{type:"text",name:"分類",id:"category",placeholder:"請輸入商品分類"},domProps:{value:t.productTemp.category},on:{input:function(e){e.target.composing||t.$set(t.productTemp,"category",e.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(" "+t._s(o[0])+" ")])]}}])})],1),a("div",{staticClass:"form-group col"},[a("label",{attrs:{for:"unit"}},[t._v("單位")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.productTemp.unit,expression:"productTemp.unit"}],staticClass:"form-control",attrs:{type:"text",id:"unit",placeholder:"請輸入商品單位"},domProps:{value:t.productTemp.unit},on:{input:function(e){e.target.composing||t.$set(t.productTemp,"unit",e.target.value)}}})])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col"},[a("label",{attrs:{for:"origin_price"}},[t._v("原價")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.productTemp.origin_price,expression:"productTemp.origin_price",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number",id:"origin_price",placeholder:"請輸入商品原價"},domProps:{value:t.productTemp.origin_price},on:{input:function(e){e.target.composing||t.$set(t.productTemp,"origin_price",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),a("div",{staticClass:"form-group col"},[a("label",{attrs:{for:"price"}},[t._v("售價")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.productTemp.price,expression:"productTemp.price",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number",id:"price",placeholder:"請輸入商品售價"},domProps:{value:t.productTemp.price},on:{input:function(e){e.target.composing||t.$set(t.productTemp,"price",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]),a("div",{staticClass:"form-group"},[a("Validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors,s=e.classes;return[a("label",{attrs:{for:"content"}},[t._v("商品敘述")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.productTemp.content,expression:"productTemp.content"}],staticClass:"form-control",class:s,attrs:{id:"content",cols:"30",rows:"2",name:"商品敘述",placeholder:"請輸入商品敘述"},domProps:{value:t.productTemp.content},on:{input:function(e){e.target.composing||t.$set(t.productTemp,"content",e.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(" "+t._s(o[0])+" ")])]}}])})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"description"}},[t._v("商品說明")]),a("vue-editor",{attrs:{id:"description"},model:{value:t.productTemp.description,callback:function(e){t.$set(t.productTemp,"description",e)},expression:"productTemp.description"}})],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.productTemp.enabled,expression:"productTemp.enabled"}],attrs:{type:"checkbox",id:"enabled"},domProps:{checked:Array.isArray(t.productTemp.enabled)?t._i(t.productTemp.enabled,null)>-1:t.productTemp.enabled},on:{change:function(e){var a=t.productTemp.enabled,o=e.target,s=!!o.checked;if(Array.isArray(a)){var i=null,r=t._i(a,i);o.checked?r<0&&t.$set(t.productTemp,"enabled",a.concat([i])):r>-1&&t.$set(t.productTemp,"enabled",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.productTemp,"enabled",s)}}}),a("label",{attrs:{for:"enabled"}},[t._v("是否啟用")])])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.cancel}},[t._v(" 取消 ")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateProduct}},[t._v(" 確認 ")])])])])])],1)},n=[],d=a("1157"),l=a.n(d),p=a("1940"),u=a.n(p),m={data:function(){return{productTemp:{imageUrl:[]},isLoading:!1}},props:{user:{type:Object},submit:{type:String}},methods:{getProduct:function(t){var e=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io","/api/").concat("069602ae-7e90-4b68-ab74-eede1d9ee78e","/admin/ec/product/").concat(t);this.$http.get(a).then((function(t){e.isLoading=!1,e.productTemp=t.data.data,l()("#productModal").modal("show")}))},updateProduct:function(){var t=this;this.isLoading=!0;var e="".concat("https://course-ec-api.hexschool.io","/api/").concat("069602ae-7e90-4b68-ab74-eede1d9ee78e","/admin/ec/product"),a="post";"edit"===this.submit&&(e="".concat("https://course-ec-api.hexschool.io","/api/").concat("069602ae-7e90-4b68-ab74-eede1d9ee78e","/admin/ec/product/").concat(this.productTemp.id),a="patch"),this.$http[a](e,this.productTemp).then((function(){t.isLoading=!1,t.productTemp={imageUrl:[]},t.$emit("update"),l()("#productModal").modal("hide")}))},uploadFile:function(){var t=this,e=document.querySelector("#imgFile").files[0],a=new FormData;a.append("file",e);var o="".concat("https://course-ec-api.hexschool.io","/api/").concat("069602ae-7e90-4b68-ab74-eede1d9ee78e","/admin/storage");this.isLoading=!0,this.$http.post(o,a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.isLoading=!1,t.productTemp.imageUrl.push(e.data.data.path),u()({title:"圖片上傳成功",icon:"success",buttons:!1,timer:1e3}),document.querySelector("#imgFile").value=""})).catch((function(){u()({title:"圖片大小超過2MB",icon:"error",buttons:!1,timer:1e3}),t.isLoading=!1}))},cancel:function(){this.productTemp={imageUrl:[]},document.querySelector("#imgFile").value=""}}},g=m,v=a("2877"),h=Object(v["a"])(g,c,n,!1,null,null,null),f=h.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"delProductModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[a("p",{staticClass:"h4"},[t._v(" 是否刪除 "),a("span",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.productTemp.title))]),t._v(" 商品(刪除後將無法回復) ")])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.delProduct}},[t._v("確認刪除")])])])])],1)},_=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header bg-danger"},[a("h5",{staticClass:"modal-title text-white",attrs:{id:"exampleModalLabel"}},[t._v("刪除商品")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],C={data:function(){return{isLoading:!1}},props:{productTemp:{type:Object},user:{type:Object}},methods:{delProduct:function(){var t=this;this.isLoading=!0;var e="".concat("https://course-ec-api.hexschool.io","/api/").concat("069602ae-7e90-4b68-ab74-eede1d9ee78e","/admin/ec/product/").concat(this.productTemp.id);this.$http.delete(e).then((function(){t.$emit("update"),l()("#delProductModal").modal("hide"),t.isLoading=!1}))}}},T=C,y=Object(v["a"])(T,b,_,!1,null,null,null),x=y.exports,P={name:"Products",data:function(){return{products:[],productTemp:{},pagination:{},submit:"",ispPrice:!1,isLoading:!1}},components:{pagination:r["a"],productModal:f,delProductModal:x},created:function(){this.getProducts()},methods:{getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io","/api/").concat("069602ae-7e90-4b68-ab74-eede1d9ee78e","/admin/ec/products?page=").concat(e);this.$http.get(a).then((function(e){t.isLoading=!1,t.products=e.data.data,t.pagination=e.data.meta.pagination}))},getProductTemp:function(t){this.productTemp=Object(i["a"])({},t)},openEditModal:function(){this.submit="edit",this.$refs.productModal.getProduct(this.productTemp.id)}}},w=P,k=Object(v["a"])(w,o,s,!1,null,null,null);e["default"]=k.exports}}]);
//# sourceMappingURL=chunk-7e6e9b1a.29320345.js.map